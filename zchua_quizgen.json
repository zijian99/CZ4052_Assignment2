{"thirdPartyDependencies":[],"code":"/** Handle the user message.\n * @param {string} payload the message sent by user\n * @param {AppState} state the state of the app\n * @param {Tool} tools available tools to perform a task\n */\nasync function run(payload, state, tools) {\n\n  // Check for what user intended to do\n  if(state.action != 0)\n  {\n    const action = await tools.checkAction(\n      {\n        userMessage: payload\n      }, \n    );\n    state.action = action\n    //tools.reply(action)\n    //tools.reply(payload)\n  }\n  \n\n  //Generate Quiz\n  if(state.action == 0)\n  {\n    \n    const reply1 = await tools.generateQuiz(\n      {\n        userMessage: payload\n      }, \n    );\n    //Save quiz qn\n    state.quizGenerated = reply1\n    tools.reply(reply1)\n    //Generate answer\n    const quizAns = await tools.generateAnswer(\n      {\n        quizPrompt: reply1\n      }, \n    );\n    //Save ans\n    state.quizAnswer = quizAns\n    //tools.reply(quizAns)\n    state.action = 2\n\n  }\n  //Generate Answer\n  else if(state.action == 1)\n  {\n    tools.reply(state.quizAnswer)\n  }\n  //Normal chat\n  else if(state.action == -1)\n  {\n    const uuid = tools.uuid();\n    await tools.chat_stream(\n    (token) => {\n      tools.streamMessage(uuid, token);\n    },\n    {userMessage: payload}, \n    {\n      memory: tools.getChatHistory(5),\n      externalTool: {\n        \"get_current_date_time\": () => {\n          return new Date().toLocaleString();\n        }\n      }\n    }\n    );\n    //tools.reply(reply1)\n  }\n\n}\n\n/** Startup.\n * @param {AppState} state the state of the app\n * @param {Tool} tools available tools to perform a task\n */\nasync function startup(state, tools) {\n  state = {\n    quizGenerated: \"NIL\",\n    quizAnswer: \"NIL\",\n    action: 2,\n    reply: \"A message reply.\"\n  }\n  tools.reply(`\n  Hi, I am the quiz generator for CZ4052 Cloud Computing course modules.\n\n  Please select the lecture(s) below:\n\n    1. Lecture 1: Basics of Cloud Computing\n    2. Lecture 2: Datacenter Networking\n    3. Lecture 3: Virtualization\n    4. Lecture 4: CPU Scheduling\n    5. Lecture 5: Cloud Security CAPTCHA-ReCAPTCHA\n    6. Lecture 6: CAP Theorem\n    7. Lecture 7: Google's Problem and Pagerank\n  \n\n`);\n}","llmFunctions":[{"functionName":"chat","description":"A chat bot that replies according to the previous conversation. It's also available to get the current time through external tools.","arguments":["userMessage"],"enableMemory":true,"messageHistory":[{"role":"system","content":"You are a helpful assistant but also a quiz generator for CZ4052 Cloud Computing Course.\nYour task is to help to answer queries from user.\nYour name is Nemobot.\nYour reply should be concise, clear, informative and logical.\nWhen you are asked about a question, you MUST think step-by-step. Explain each step in an ordered list.\nYour reply should be in Markdown format."},"memoryPlaceholder",{"role":"user","content":"{{userMessage}}"}],"stream":true,"parameters":{"maxResponse":500,"temperature":0.7,"topP":0.95,"frequencyPenalty":0,"presencePenalty":0},"functions":[{"name":"get_current_date_time","description":"Get the current date and time","parameters":"{\n  \"type\": \"object\",\n  \"properties\": {}\n}"}]},{"functionName":"checkAction","description":"","arguments":["userMessage"],"enableMemory":false,"messageHistory":[{"role":"system","content":"Your jobs is to determine whether user asked to generate quiz or asked for quiz answers or asked for other question.\n\nReturn 1 if user asked for quiz answer.\nReturn 0 if user asked to generate quiz or what are the available lectures/topics.\nReturn -1 if otherwise."},"memoryPlaceholder",{"role":"user","content":"{{userMessage}}"}],"stream":false,"parameters":{"maxResponse":100,"temperature":0.7,"topP":0.95,"frequencyPenalty":0,"presencePenalty":0},"functions":[]},{"functionName":"generateQuiz","description":"Generate quiz based on user input","arguments":["userMessage"],"enableMemory":false,"messageHistory":[{"role":"system","content":"Task: Your task is to create a quiz consisting of only questions and answer choices without revealing the correct answer. Each question should be clear, concise, and relevant to the specified topic.\n\nGuidelines:\n\n1. Format: Present each question as a standalone item followed by its answer choices, with each on a separate line. Your reply should be in Markdown format.\n2. Clarity: Ensure that each question is understandable without additional context.\n3. Relevance: Keep the questions focused on the selected topic.\n4. Variety: Include a variety of question types (e.g., multiple choice, true/false, short answer) if possible.\n5. Number of Questions: Generate 3 questions for the quiz.\n6. Number of Answer Choices: Generate at least 4 answer choices for each question\n\n\nAvailable Topics:\n\n1. Lecture 1: \na. Basics of Cloud Computing, \nb. Infrastructure-as-a-Service (laaS) ,\nc. Platform-as-a-Service (PaaS), \nd. Software-as-a-Service (SaaS),\ne. Opportunities and Challenges,\nf. Advantages and Disadvantages of cloud computing\n\n2. Lecture 2:\na. Basic concepts of network and internet\nb. Layering architecture of network and internet\nc. TCP/IP\nd. TCP Congestion Control Algorithm(Additive Increase Multiplicative Decrease)\n\n3. Lecture 3:\na. Concepts of Virtualization\nb. Virtualization architecture\nc. CPU and OS basics\nd. Types of CPU virtualization\ne. Cloud infrastructures\nf. RAID (RAID (Redundant Array of Inexpensive Disks)\n\n4. Lecture 4:\na. Why need CPU scheduling?\nb. Simple earliest deadline first - schedulability, time granularity, work-conserving\nc. Credit scheduler\nd. Stride scheduler\n\n5. Lecture 5:\na. Human-assisted Computation: Crowdsourcing (CAPTCHA, reCAPTCHA)\nb. Human-assisted Computation: Challenge-Response System\nc. Human-assisted Computation: Autograding\n\n6. Lecture 6:\na. CAP Theorem\n\n7. Lecture 7:\na. Page Rank Algorithm\nb. PageRank: Random Surfer Model\n\nUser Instructions: Please choose one of the predefined topics listed above by specifying the corresponding number when submitting your request. If you do not choose a topic or select a topic not listed here, the AI will generate questions based on a random topic from the predefined options.\n"},"memoryPlaceholder",{"role":"user","content":"SelectedLecture: {{userMessage}}"}],"stream":false,"parameters":{"maxResponse":4096,"temperature":0.7,"topP":0.95,"frequencyPenalty":0,"presencePenalty":0},"functions":[]},{"functionName":"generateAnswer","description":"","arguments":["quizPrompt"],"enableMemory":false,"messageHistory":[{"role":"system","content":"Task: Your task is to generate answer based solely on the questions and answer asked by the user. Your answers should be directly relevant to the provided question and should not introduce new topics or information.\n\nGuidelines:\nYour reply should be in Markdown format.\nYou should give explanation on the correct answer\nProvide concise and informative responses.\nStick to the topic of each question without diverging into unrelated areas.\nAvoid introducing new questions or information not directly requested by the user."},"memoryPlaceholder",{"role":"user","content":"QuestionAndAnswer: {{quizPrompt}}"}],"stream":false,"parameters":{"maxResponse":4096,"temperature":0.7,"topP":0.95,"frequencyPenalty":0,"presencePenalty":0},"functions":[]}]}